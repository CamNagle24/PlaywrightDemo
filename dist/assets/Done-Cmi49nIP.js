import{y as n,C as D,d as a,f as u,p,k as c,z as i,u as m,h as I,l as y,G as f,R as g,H as h,I as k,n as s,j as V}from"./vue-vendor-CovbRsIb.js";import{u as w,d as x,b as C}from"./index-CPPVuLON.js";import{X as S,Y as U,Z as T}from"./firebase-BFELHJ2J.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"card"},L={class:"title"},M={key:0,class:"badge"},j={key:0,class:"hint"},q={key:1},E={key:0,class:"categories"},G={class:"todo-list"},H={class:"todo-text"},P={key:0,class:"category"},X={key:0,class:"empty"},Y={__name:"Done",setup(Z){const l=w(),b=D(),r=n(()=>{const o=b.params.category;return!o||typeof o!="string"?"":decodeURIComponent(o)}),N=n(()=>l.value?S(T(x,"users",l.value.uid,"todos"),U("done","==",!0)):null),_=C(N),d=n(()=>{if(!_.value)return[];let o=_.value;return r.value&&(o=o.filter(t=>t.category===r.value)),[...o].sort((t,e)=>{const R=t.createdAt?t.createdAt.toMillis():0;return(e.createdAt?e.createdAt.toMillis():0)-R})}),A=n(()=>l.value?T(x,"users",l.value.uid,"categories"):null),B=C(A),v=n(()=>(B.value||[]).map(o=>o.name).filter(Boolean));return(o,t)=>(s(),a("div",F,[u("h1",L,[t[0]||(t[0]=p(" Completed To-dos ",-1)),r.value?(s(),a("span",M,i(r.value),1)):c("",!0)]),m(l)?(s(),a("div",q,[v.value.length?(s(),a("div",E,[t[2]||(t[2]=u("span",{class:"cat-label"},"Filter:",-1)),I(m(g),{to:"/done",class:f(["chip",{active:!r.value}])},{default:y(()=>[...t[1]||(t[1]=[p(" All ",-1)])]),_:1},8,["class"]),(s(!0),a(h,null,k(v.value,e=>(s(),V(m(g),{key:e,to:`/done/${encodeURIComponent(e)}`,class:f(["chip",{active:r.value===e}])},{default:y(()=>[p(i(e),1)]),_:2},1032,["to","class"]))),128))])):c("",!0),u("ul",G,[(s(!0),a(h,null,k(d.value,e=>(s(),a("li",{key:e.id},[u("span",H,i(e.text&&e.text.length>100?e.text.substring(0,100)+"...":e.text||"(no text)"),1),e.category?(s(),a("span",P,i(e.category),1)):c("",!0)]))),128)),d.value&&d.value.length===0?(s(),a("li",X," No completed to-dos yet. ")):c("",!0)])])):(s(),a("p",j," Please sign in first to see your completed to-dos. "))]))}},W=z(Y,[["__scopeId","data-v-2e635a27"]]);export{W as default};
